\makeatletter  
\newcounter{score}
\newcounter{tabstop}[score]
\newcommand{\grealign}{%
  \@bsphack%
  \ifgre@boxing\else%
    \kern\gre@dimen@begindifference%
    \stepcounter{tabstop}%
    \expandafter\zsavepos{stop-\thescore-\thetabstop}%
    \kern-\gre@dimen@begindifference%
  \fi%
  \@esphack%
}

\newcommand{\setstops}{%
  \gdef\nstabbing@stops{%
    \checkoddpage
    \hspace*{-\ifoddpage\oddsidemargin\else\evensidemargin\fi}\hspace{-1in}%
    \hspace*{\zposx{stop-\thescore-1} sp}\=%
  }%
  \count@=\@ne
  \loop\ifnum\count@<\value{tabstop}%
    \begingroup\edef\x{\endgroup
      \noexpand\g@addto@macro\noexpand\nstabbing@stops{%
        \noexpand\hspace{-\noexpand\zposx{stop-\thescore-\the\count@} sp}%
        \noexpand\hspace{\noexpand\zposx{stop-\thescore-\the\numexpr\count@+1} sp}\noexpand\=%
      }%
    }\x
    \advance\count@\@ne
  \repeat
  \nstabbing@stops\kill
}
\makeatother

\newenvironment{nstabbing}
  {\setlength{\topsep}{0pt}%
   \setlength{\partopsep}{0pt}%
   \tabbing%
   \setstops}
  {\endtabbing\stepcounter{score}}

\def\beginpsalmcols{\begin{parcolumns}[rulebetween]{2}}
\def\endpsalmcols{\end{parcolumns}}
\newcommand{\printpsalmtitle}[1]{%
  {\addfontfeature{Numbers=Lining}\centering Psalm #1\\}%
}

\newcommand{\printpsalmwithtranslation}[3]{
	% #1 psalm number
	% #2 ending
	% #3 0 to start on 1st verse, 1 for second
	\setlength{\columnsep}{18pt}
	\setlength{\columnseprule}{.4pt}
	\beginpsalmcols
	\colchunk{\vspace{-12pt}%
	\begin{psalmverses}[#3]
	\vspace{-\baselineskip}%
	\input{psalms/Psalm#1-#2-verses}
	\end{psalmverses}
	}

	\selectlanguage{american}
	\colchunk{\vspace{-12pt}%
	\sloppy
	\begin{psalmverses}
	\vspace{-\baselineskip}%
	\input{psalms/Psalm#1-verses-en}
	\end{psalmverses}
	}
	\selectlanguage{latin}
	\endpsalmcols
}

\renewcommand{\printpsalm}[3]{
  % #1 psalm number
  % #2 ending
  % #3 0 to start on 1st verse, 1 for second
  \setlength{\columnsep}{18pt}
  \setlength{\columnseprule}{.4pt}
  \begin{multicols}{2}
  \begin{psalmverses}[#3]
  \input{psalms/Psalm#1-#2-verses}
  \end{psalmverses}
  \end{multicols}
}



\newcommand{\printpsalmtranslation}[3]{
  % #1 psalm number
  % #2 ending
  % #3 0 to start on 1st verse, 1 for second
  \setlength{\columnsep}{18pt}
  \setlength{\columnseprule}{.4pt}
  \begin{multicols}{2}
  \begin{psalmverses}[#3]
  \input{psalms/Psalm#1-verses-en}
  \end{psalmverses}
  \end{multicols}
}

\def\beginchaptercols{\begin{parcolumns}[rulebetween]{2}}
\newcommand{\printchapternew}[4]{
	% #1 ref
	% #2 latin first words
	% #3 latin remaining
	% #4 english text
	{\noindent\hspace{3em}Chapter.\hfill\emph{#1}\hspace{3em}}
    \beginchaptercols{}
    \colchunk{\sloppy\dropcap{latin}{#2} #3\hfill{}\Rbar{}~Deo~grátias.}
    \colchunk{\sloppy \dropcap{american}{#4}}
    \end{parcolumns}
}
\newcommand{\printvrwithtranslation}{
    {\normalsize
    \ifx\beginvrcols\undefined\def\beginvrcols{\begin{parcolumns}[rulebetween]{2}}\fi
    \beginvrcols
    \colchunk{
      \par\vspace{-\baselineskip}\noindent\selectlanguage{latin}%
      \Vbar{}~\vlatin{}
    }
    \colchunk{%
      \par\vspace{-\baselineskip}\noindent\selectlanguage{american}%
      \Vbar{}~\vtranslation{}
    }%
    \colplacechunks%
    \ifx\rlatin\undefined\else
    \colchunk{
      \par\vspace{-\baselineskip}\noindent\selectlanguage{latin}%
      \Rbar{}~\rlatin{}%
    }
    \colchunk{%
      \par\vspace{-\baselineskip}\noindent\selectlanguage{american}%
      \Rbar{}~\rtranslation{}%
    }%
    \colplacechunks%
    \fi
    \end{parcolumns}
    }
}
\newcommand{\printtercepsalms}[1]{
  % #1 is psalm tone like 2D
  \printpsalmtitle{118. III.}

  %print first verse in chant
  {
    \gresetinitiallines{0}
    \grechangedim{interwordspacetext}{0.15 cm plus 0.15 cm minus 0.10 cm}{scalable}%
    \gregorioscore{psalms/Psalm118.3-#1}
    \input{../gsp-spaces}
    \greseteolcustos{auto}
  }

  \vspace{-\baselineskip}
  \setlength{\columnsep}{18pt}
  \setlength{\columnseprule}{.4pt}
  \selectlanguage{latin}
  \begin{multicols}{2}
  \begin{psalmverses}[1]
  \input{psalms/Psalm118.3-#1-verses}
  \end{psalmverses}
  %\medskip
  \printpsalmtitle{118. IV.}
  \begin{psalmverses}
  \input{psalms/Psalm118.4-#1-verses}
  \end{psalmverses}
  %\medskip
  \printpsalmtitle{118. V.}
  \begin{psalmverses}
  \input{psalms/Psalm118.5-#1-verses}
  \end{psalmverses}
  \setlength{\parindent}{6ex}
  \IfStrEq{#1}{no-tone}{}{%if not no-tone

    \emph{Repeat antiphon.}%
  }
  \end{multicols}
}
\newcommand{\printtercepsalmstranslation}{
  \setlength{\columnsep}{18pt}
  \setlength{\columnseprule}{.4pt}
  \selectlanguage{american}
  \begin{multicols}{2}
  \printpsalmtitle{118. III.}
  \begin{psalmverses}
  \input{psalms/Psalm118.3-verses-en}
  \end{psalmverses}
  \medskip
  \printpsalmtitle{118. IV.}
  \begin{psalmverses}
  \input{psalms/Psalm118.4-verses-en}
  \end{psalmverses}
  \medskip
  \printpsalmtitle{118. V.}
  \begin{psalmverses}
  \input{psalms/Psalm118.5-verses-en}
  \end{psalmverses}
  \end{multicols}
}

{
  \label{sunday}
  \chapter{Sunday at Terce}
  \section{Sunday at Terce throughout the year}

  \printgabc{\Vbar}{}{D}{deus-in-adjutorium}\label{deusinadjutorium}

  \bigskip

  {\centering Hymn.\par}\label{hymn-sunday}

  \def\dotting{\hfill%\leaders\hbox to 1em{\hfil.\hfil}\hfill
    }%
  \begin{multicols}{2}%
  \noindent{}In Advent,\dotting \emph{p.~\pageref{hymn-advent}}\\
  Christmas,\dotting \emph{p.~\pageref{hymn-christmas}}\\
  Epiphany,\dotting \emph{p.~\pageref{hymn-epiphany}}\\
  In Lent,\dotting \emph{p.~\pageref{hymn-lent}}\\
  In Passiontide,\dotting \emph{p.~\pageref{hymn-passiontide}}\\
  In Paschaltide,\dotting \emph{p.~\pageref{hymn-paschaltide}}\\
  Ascension,\dotting \emph{p.~\pageref{hymn-ascension}}\\
  Pentecost,\dotting \emph{p.~\pageref{hymn-pentecost}}\\
  Corpus Christi,\dotting \emph{p.~\pageref{hymn-corpus-christi}}\\
  Sacred Heart,\dotting \emph{p.~\pageref{hymn-sacred-heart}}
  \end{multicols}%

  {\centering 1.~On Ordinary Sundays.\par}

  \printgabc{2.}{}{N}{hy--nunc_sancte_nobis_(in_dominicis_per_annum)--solesmes_1961}

  \oldneedspace{10\baselineskip}
  {\centering 2.~On Solemn Feasts.\par}

  \printgabc{8.}{}{N}{hy--nunc_sancte_nobis_(in_festis)--solesmes_1961}

  \begin{multicols}{2}
  \begin{psalmverses}
\item Come Holy Ghost, who ever One
Art with the Father and the Son,
It is the hour, our souls possess
With thy full flood of holiness.

\item Let flesh and heart and lips and mind
Sound forth our witness to mankind;
And love light up our mortal frame,
Till others catch the living flame.

\item Almighty Father, hear our cry,
Through Jesus Christ, our Lord most High,
Who, with the Holy Ghost and thee,
Doth live and reign eternally.
Amen.
  \end{psalmverses}
  \end{multicols}

\bigskip



% print antiphon
%    \printgabc[\preant]{\antlineone}{\antlinetwo}{\antinitial}{\anttex}
  \bigskip
  \printgabc{Ant.}{2. D}{A}{an--alleluia._(sund._at_terce)--solesmes}
% print translation
  \translation[]{Alleluia, Lead me into the path of thy commandments, alleluia, alleluia.}

\bigskip
  \printtercepsalms{2D}

  \bigskip
  \printtercepsalmstranslation{}

% \printpsalm{118.3}{2D}{1}
% \printpsalmtitle{118. IV.}
% \printpsalm{118.4}{2D}{0}
% \printpsalmtitle{118. V.}
% \printpsalm{118.5}{2D}{0}

% print antiphon
%    \printgabc[\preant]{\antlineone}{\antlinetwo}{\antinitial}{\anttex}
  \pagebreak
  \printgabc{Ant.}{2. D}{A}{an--alleluia._(sund._at_terce)--solesmes}
% print translation
  %\translation[]{Alleluia, Lead me into the path of thy commandments, alleluia, alleluia.}

\bigskip
\printchapternew{1. John 4.}{Deus cáritas}{est~:~\dag{} et qui manet in caritáte, in Deo manet,~* et Deus in eo.}{God is charity: and he that abideth in charity, abideth in God, and God in him.}

\bigskip\label{shortresp-sunday}
\printgabc{Short}{Resp.}{I}{re--inclina_cor_meum--solesmes}

\translation[]{\Vbar{}~Incline my heart into thy testimonies.
\Rbar{}~Incline\dots{}
\Vbar{}~Turn away my eyes that they may not behold vanity: quicken me in thy way.
\Rbar{}~Into thy testimonies.
\Vbar{}~Glory be to the Father, and to the Son, and to the Holy Ghost.
\Vbar{}~Incline\dots{}}

\bigskip\label{vr-sunday}
\gresetinitiallines{0}
\gregorioscore{vr-ego-dixi}
\newlength{\myhwidth}
\settowidth{\myhwidth}{tib}
\begin{nstabbing}
\>\Rbar{}~Sana ánimam meam, quia peccávi \>\hspace{-\myhwidth}tibi.\\
\end{nstabbing}

\translation[]{\Vbar{}~I said: O Lord, be thou merciful to me.\\
\Rbar{}~Heal my soul, for I have sinned against thee.}

\bigskip
\def\beginvrcols{\begin{parcolumns}[rulebetween,colwidths={1=0.48\linewidth}]{2}}
\def\vlatin{Dóminus vobíscum.}
\def\rlatin{Et cum spíritu tuo.}
\def\vtranslation{The Lord be with you.}
\def\rtranslation{And with thy spirit.}
{\centering Collect.\par}
\printvrwithtranslation{}

\bigskip
    \def\dotting{\leaders\hbox to 1em{\hfil.\hfil}\hfill}
    \printnote{Advent,\dotting \emph{p.~\pageref{advent1-collect} to \pageref{advent4-collect}}}

    \printnote{Christmas,\dotting \emph{p.~\pageref{christmas-eve-collect} to \pageref{holy-family-collect}}}

    \printnote{Time after Epiphany,\dotting \emph{p.~\pageref{epiphany2-collect} to \pageref{epiphany6-collect}}}

    \printnote{Septuagesima \& Lent,\dotting \emph{p.~\pageref{septuagesima-collect} to \pageref{passion2-collect}}}

    \printnote{Easter to Pentecost,\dotting \emph{p.~\pageref{easter1-collect} to \pageref{pentecost-collect}}}

    \printnote{Time after Pentecost,\dotting \emph{p.~\pageref{pentecost2-collect} to \pageref{pentecost24-collect}}}

\bigskip
\printvrwithtranslation{}
\bigskip

\gresetinitiallines{0}\label{benedicamus-domino-sunday}
\gregorioscore{vr-benedicamus-domino}
\bigskip

\def\beginvrcols{\begin{parcolumns}[rulebetween,colwidths={1=0.44\linewidth}]{2}}
\def\vlatin{Fidélium ánimæ per misericórdiam Dei requiéscant in pace.\hfill{}Amen.}
\let\rlatin=\undefined
\def\vtranslation{May the souls of the faithful departed through the mercy of God rest in peace.\hfill{}Amen.}
\let\rtranslation=\undefined
\printvrwithtranslation{} 
}